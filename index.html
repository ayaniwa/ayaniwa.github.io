<!doctype html>
<html lang="en" class="no-js" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Ayana Niwa / 丹羽彩奈 — NLP Researcher</title>
<meta name="description" content="Homepage of Ayana Niwa (丹羽彩奈), NLP researcher. Publications, talks, committees, CV, and contact." />
<link rel="canonical" href="https://ayaniwa.github.io/" />


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">


</head>
<body>
<div class="container">
<div class="grid">
<aside class="aside card">
<div class="pad">
<img src="images/me.png" alt="Portrait of Ayana Niwa" class="avatar" />
<div class="name">Ayana Niwa</div>
<div class="title">Ph.D. in Engineering · NLP Researcher</div>


<div class="social">
<span class="icon-wrap">
  <a class="icon"
     id="copy-email-icon"
     role="button"
     tabindex="0"
     aria-label="Copy email address"
     data-email="ayana.niwa@mbzuai.ac.ae">  
    <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm0 14H4V8l8 5 8-5v10Zm-8-7L4 6h16l-8 5Z"/></svg>
  </a>
  <span id="copy-status" class="bubble" style="display:none;">Copied!</span>
</span>
<a class="icon" href="https://twitter.com/ayaniwa1213" target="_blank" rel="noopener" aria-label="X / Twitter"><svg viewBox="0 0 24 24"><path d="M18.244 2H21l-6.66 7.65L22 22h-6.59l-4.74-6.16L4.9 22H2.14l7.12-8.19L2 2h6.7l4.27 5.73L18.24 2Zm-2.31 18h1.71L7.14 4H5.35l10.58 16Z"/></svg></a>
<a class="icon" href="https://github.com/ayaniwa" target="_blank" rel="noopener" aria-label="GitHub"><svg viewBox="0 0 24 24"><path d="M12 .5A11.5 11.5 0 0 0 .5 12.3c0 5.23 3.41 9.66 8.15 11.24.6.12.82-.27.82-.59 0-.29-.01-1.26-.02-2.29-3.32.74-4.02-1.45-4.02-1.45-.54-1.4-1.33-1.77-1.33-1.77-1.08-.76.08-.74.08-.74 1.19.09 1.81 1.25 1.81 1.25 1.06 1.86 2.78 1.32 3.45 1.01.11-.8.41-1.32.75-1.63-2.65-.31-5.44-1.37-5.44-6.1 0-1.35.47-2.46 1.24-3.32-.12-.31-.54-1.56.12-3.26 0 0 1.01-.33 3.31 1.26a11.1 11.1 0 0 1 6.03 0c2.3-1.59 3.3-1.26 3.3-1.26.67 1.7.25 2.95.13 3.26.77.86 1.23 1.97 1.23 3.32 0 4.74-2.79 5.78-5.45 6.09.43.38.81 1.12.81 2.27 0 1.64-.02 2.97-.02 3.38 0 .32.22.71.83.59A11.5 11.5 0 0 0 23.5 12.3 11.5 11.5 0 0 0 12 .5Z"/></svg></a>
<a class="icon" href="https://speakerdeck.com/ayaniwa" target="_blank" rel="noopener" aria-label="Speaker Deck"><svg viewBox="0 0 24 24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3H3V5Zm0 5h18v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-9Zm4 2v5h10v-5H7Z"/></svg></a>
</div>


<div class="divider"></div>
<div class="quicknav" aria-label="Quick section navigation">
<div class="quicknav-title">Jump to</div>
<a class="qbtn" href="#about">About</a>
<a class="qbtn" href="#experience">Work</a>
<a class="qbtn" href="#publications">Publications</a>
<a class="qbtn" href="#education">Education</a>
<a class="qbtn" href="#talks">Talks</a>
<a class="qbtn" href="#committee">Committee</a>
<a class="qbtn" href="#others">Others</a>
</div>
</div>
</aside>
      
      <div class="stack">

        
        <section class="card section" id="about">
          <h2>About</h2>
          <div class="body">
            <p>Postdoctoral Researcher at <strong>MBZUAI</strong>, Visiting Scientist at <strong>RIKEN AIP</strong>. <br>My research focuses on understanding how LLMs acquire knowledge from training data, interpret it internally, and leverage it for reasoning. <br>My CV is <a href="files/cv_latest.pdf">here</a> <span class="muted">(last updated: Oct. 16, 2024)</span>.</p>
          </div>
        </section>

        
        <section class="card section" id="experience">
          <h2>Work Experience</h2>
          <div class="body">
            <div class="item"><div class="year">2025/05 –</div><div class="company"><strong><a href="https://www.riken.jp/en/research/labs/aip/goalorient_tech/nat_lang_understand/">NLU Team</a>, <a href="https://www.riken.jp/en/research/labs/aip/">RIKEN AIP</a></strong><br><span class="muted">Visiting Scientist</span></div></div>
            <div class="item"><div class="year">2024/10 –</div><div class="company"><strong><a href="https://www.mint-nlp-mbzuai.com">Kentaro Team</a>, <a href="https://mbzuai.ac.ae/">MBZUAI</a></strong><br><span class="muted">Researcher</span></div></div>
            <div class="item"><div class="year">2023/04 – 2024/09</div><div class="company"><strong><a href="https://megagon.ai/">Megagon Labs</a></strong><br><span class="muted">Research Scientist</span></div></div>
            <div class="item"><div class="year">2023/06 – 2024/09</div><div class="company"><strong><a href="https://www.nlp.c.titech.ac.jp/index.en.html">Okazaki Lab, Tokyo Institute of Technology</a></strong><br><span class="muted">Part‑time Researcher</span></div></div>
            <div class="item"><div class="year">2021/04 – 2023/03</div><div class="company"><strong><a href="https://www.jsps.go.jp/english/e-pd/">JSPS DC2</a></strong><br><span class="muted">Research Fellow</span></div></div>
            <div class="item"><div class="year">2019/06 – 2023/03</div><div class="company"><strong><a href="https://megagon.ai/">Megagon Labs</a></strong><br><span class="muted">Research Intern</span></div></div>
            <div class="item"><div class="year">2018/10 – 2023/03</div><div class="company"><strong><a href="https://www.cyberagent.co.jp/">CyberAgent, Inc.</a></strong><br><span class="muted">Collaborative Project</span></div></div>
            <div class="item"><div class="year">2018/10 – 2023/03</div><div class="company"><strong><a href="https://www.titech.ac.jp/english">Tokyo Institute of Technology</a></strong><br><span class="muted">Research Assistant</span></div></div>
          </div>
        </section>

        
        <section class="card section" id="publications">
  <h2>Publications</h2>
  <div class="body">

    <h3>Journal (Refereed)</h3>
    <ul class="publist">
      <li>
        <span class="pubtitle">Nearest Neighbor Non-autoregressive Text Generation</span>
  <span class="pubdetail">Journal of Information Processing, 2023</span> <a class="pill" href="https://www.jstage.jst.go.jp/article/ipsjjip/31/0/31_344/_article/-char/en/" target="_blank" rel="noopener">J-STAGE</a><br>
        <span class="muted">Ayana Niwa, Sho Takase, Naoaki Okazaki</span>
      </li>
      <li>
        <span class="pubtitle">Construction of a Corpus of Rhetorical Devices in Slogans and Structural Analysis of Antitheses</span>
  <span class="pubdetail">ACM TALLIP, 2021</span> <a class="pill" href="https://dl.acm.org/doi/10.1145/3465218" target="_blank" rel="noopener">ACM</a><br>
        <span class="muted">Ayana Niwa, Naoaki Okazaki, Kohei Wakimoto, Keisuke Nishiguchi, Masataka Mouri</span>
      </li>
    </ul>

    <h3>International Conference (Refereed)</h3>
    <ul class="publist">
      <li>
        <span class="pubtitle">Rectifying Belief Space via Unlearning to Harness LLMs' Reasoning</span>
  <span class="pubdetail">ACL 2025 Findings</span> <a class="pill" href="https://aclanthology.org/2025.findings-acl.1285/" target="_blank" rel="noopener">Anthology</a> <a class="pill" href="files/ACL2025_poster.pdf" target="_blank" rel="noopener">Poster</a><br>
        <span class="muted">Ayana Niwa, Masahiro Kaneko, Kentaro Inui</span>
      </li>
      <li>
        <span class="pubtitle">AmbigNLG: Addressing Task Ambiguity in Instruction for NLG</span>
  <span class="pubdetail">EMNLP 2024</span><a class="pill" href="https://aclanthology.org/2024.emnlp-main.599/" target="_blank" rel="noopener">Anthology</a><br>
        <span class="muted">Ayana Niwa, Hayate Iso</span>
      </li>
      <li>
        <span class="pubtitle">Interpretability for Language Learners Using Example-Based GEC</span>
  <span class="pubdetail">ACL 2022</span> <a class="pill" href="https://aclanthology.org/2022.acl-long.496/" target="_blank" rel="noopener">Anthology</a><br>
        <span class="muted">Masahiro Kaneko, Sho Takase, Ayana Niwa, Naoaki Okazaki</span>
      </li>
      <li>
        <span class="pubtitle">Predicting Antonyms in Context using BERT</span>
  <span class="pubdetail">INLG 2021</span> <a class="pill" href="https://aclanthology.org/2021.inlg-1.6/" target="_blank" rel="noopener">Anthology</a><br>
        <span class="muted">Ayana Niwa, Keisuke Nishiguchi, Naoaki Okazaki</span>
      </li>
    </ul>

    <h3>Article</h3>
    <ul class="publist">
      <li>
        <span class="pubtitle">NLP Colloquium</span>
  <span class="pubdetail">Journal of Natural Language Processing, 2024</span> <a class="pill" href="https://www.jstage.jst.go.jp/article/jnlp/31/1/31_300/_article/-char/en" target="_blank" rel="noopener">J-STAGE</a><br>
        <span class="muted">Ayana Niwa, Sho Yokoi, Junya Takayama, Itsumi Saito</span>
      </li>
    </ul>

    <h3>Domestic Conference and Symposium (Unrefereed)</h3>
    <ul class="publist" id="domestic-list">
      <li>
        <span class="pubtitle">Addressing Ambiguity in Instruction for NLG</span>
  <span class="pubdetail">NLP 2024, Hyogo, Japan</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/A7-6.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Ayana Niwa, Hayate Iso</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">An Investigation of Effectiveness of the Nearest Neighbor Distribution in T5 Model</span>
  <span class="pubdetail">NLP 2023, Okinawa, 2023</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2023/pdf_dir/P12-6.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Ayana Niwa, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">An Investigation of the Directional Dependency of Text Generation in Large Language Models</span>
  <span class="pubdetail">NLP 2023, Okinawa, 2023</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2023/pdf_dir/H9-1.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Daisuke Taniguchi, Kohei Wakimoto, Ayana Niwa, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Advertisement text creation support using product reviews and features</span>
  <span class="pubdetail">JSAI 2023, online, 2023</span> <a class="pill" href="https://www.jstage.jst.go.jp/article/jstage/27/0/27_45/_pdf" target="_blank" rel="noopener">Paper</a><br>
        <span class="muted">Daisuke Taniguchi, Kohei Wakimoto, Kazuya Kuroda, Shunyo Kawamoto, Keisuke Nishiguchi, Ayana Niwa, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Non-autoregressive Generation using the Nearest Neighbor</span>
  <span class="pubdetail">NLP 2022, online, 2022</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2022/pdf_dir/C6-3.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Ayana Niwa, Sho Takase, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Robust Dependency Parsing for the Omission of a Post-positional Particle using Pseudo Training Data</span>
  <span class="pubdetail">NLP 2022, online, 2022</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2022/pdf_dir/B7-1.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Ryogo Ishikawa, Ayana Niwa, Mizuki Sakae, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">A Study for Sentiment Analysis Accepting the Diverse of Emotion Sensitivities</span>
  <span class="pubdetail">JSAI 2021, online, 2021</span> <a class="pill" href="https://www.jstage.jst.go.jp/article/pjsai/JSAI2021/0/JSAI2021_2Yin506/_article/-char/ja" target="_blank" rel="noopener">Paper</a><br>
        <span class="muted">Ayana Niwa, Hiroshi Matsuda</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Antonym Filling Task in Context using BERT</span>
  <span class="pubdetail">NLP 2021, online, 2021</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2021/pdf_dir/C9-1.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Ayana Niwa, Keisuke Nishiguchi, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Advertisement Slogan Generation Considering Company Information</span>
  <span class="pubdetail">NLP 2021, online, 2021</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2021/pdf_dir/B3-3.pdf" target="_blank" rel="noopener">PDF</a><br>
        <span class="muted">Natsumi Nobori, Tatsuya Hiraoka, Ayana Niwa, Keisuke Nishiguchi, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Advertising Slogan Generation with Antitheses by using Masked Language Models</span>
  <span class="pubdetail">YANS 2020, online, 2020</em><br>
        <span class="muted">Ayana Niwa, Keisuke Nishiguchi, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Structural Analysis of Antitheses in Slogan using Span Candidate Refinement with Word Correspondence</span>
  <span class="pubdetail">JSAI 2020, online, 2020</span> <a class="pill" href="https://www.jstage.jst.go.jp/article/jstage/66/0/66_197/_pdf" target="_blank" rel="noopener">URL</a><br>
        <span class="muted">Ayana Niwa, Kohei Wakimoto, Keisuke Nishiguchi, Masataka Mouri, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Structural Analysis of Antitheses in Advertising Slogans</span>
  <span class="pubdetail">NLP 2020, online, 2020</em><br>
        <span class="muted">Ayana Niwa, Kohei Wakimoto, Keisuke Nishiguchi, Masataka Mouri, Naoaki Okazaki</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">A Study Toward Automatic Advertising Slogan Generation Considering Rhetorical Devices</span>
  <span class="pubdetail">YANS 2019, Hokkaido, 2019</span> <a class="pill" href="https://drive.google.com/file/d/1abc-having-example" target="_blank" rel="noopener">Poster</a><br>
        <span class="muted">Ayana Niwa, Naoaki Okazaki, Keisuke Nishiguchi, Chihiro Kameyama, Masataka Mouri</span>
      </li>
      <li class="extra" hidden>
        <span class="pubtitle">Analysis Toward Automatic Generation of Advertising Slogans</span>
  <span class="pubdetail">NLP 2019, Aichi, 2019</span> <a class="pill" href="https://www.anlp.jp/proceedings/annual_meeting/2019/pdf_dir/P3-12.pdf" target="_blank" rel="noopener">Paper</a><br>
        <span class="muted">Ayana Niwa, Naoaki Okazaki, Keisuke Nishiguchi, Chihiro Kameyama, Masataka Mouri</span>
      </li>
    </ul>
<div class="more-wrap">
  <button class="btn ghost" id="toggle-domestic" type="button">Show more</button>
</div>
  </div>
</section>


        
        <section class="card section" id="education">
          <h2>Education</h2>
          <div class="body">
            <div class="item"><div class="year">2020/04 – 2023/03</div><div class="company"><span class="edurole">Ph.D., Tokyo Institute of Technology</span><span class="edudetail">Adviser: <a href="http://www.chokkan.org/index.en.html">Prof. Naoaki Okazaki</a></span></div></div>
            <div class="item"><div class="year">2018/04 – 2020/03</div><div class="company"><span class="edurole">M.Eng., Tokyo Institute of Technology</span><span class="edudetail">Adviser: <a href="http://www.chokkan.org/index.en.html">Prof. Naoaki Okazaki</a></span></div></div>
            <div class="item"><div class="year">2014/04 – 2018/03</div><div class="company"><span class="edurole">B.S., Sophia University</span><span class="edudetail">Adviser: <a href="http://pweb.cc.sophia.ac.jp/irohara/index-e.html">Prof. Takashi Irohara</a></span></div></div>
          </div>
        </section>

        
        <section class="card section" id="talks">
          <h2>Talks</h2>
          <div class="body">
            <ul class="publist">
              <li><span class="talktitle">“A Quick Overview to Unlock the Potential of LLMs through Prompt Engineering.”</span><span class="talkdetail"> <a href="https://tokyoai.connpass.com/event/326265/">Tokyo AI</a>, 2024/08 <a class="pill" href="https://speakerdeck.com/ayaniwa/a-quick-overview-to-unlock-the-potential-of-llms-through-prompt-engineering" target="_blank" rel="noopener">Slides</a></span></li>
              <li><span class="talktitle">“The Frontiers of Mathematics, Information, and AI.”</span><span class="talkdetail"> <a href="https://aip.riken.jp/event-list/surijohoai-female-students-seminar/?lang=ja">RIKEN AIP</a>, 2022/11 <a class="pill" href="https://www.youtube.com/watch?v=63nROMDfLl4&list=PLaEuBnOE7AzMGX9JsWsICQXEjr1sFnJIm&index=6" target="_blank" rel="noopener">YouTube</a></span></li>
              <li><span class="talktitle">“Career Path as a Female Researcher.”</span><span class="talkdetail"> NeurIPS Meetup Japan WiML, 2021/12</span></li>
              <li><span class="talktitle">“Derivation and Use of Templates in NLG.”</span><span class="talkdetail">SIG‑FPAI, 2021/11 <a class="pill" href="https://www.jstage.jst.go.jp/article/jsaifpai/118/0/118_03/_article/-char/ja/" target="_blank" rel="noopener">Info</a></span></li>
              <li><span class="talktitle">“Trends in NLP at NeurIPS 2019.”</span><span class="talkdetail">JSAI AI Seminar, 2020/03 <a class="pill" href="https://speakerdeck.com/ayaniwa/trends-in-natural-language-processing-at-neurips-2019" target="_blank" rel="noopener">Slides</a></span></li>
              <li><span class="talktitle">“A Smart Computer that Understands Language.”</span><span class="talkdetail">A visiting lecture at Jissen Gakuen Senior High School, 2019/11</span></li>
              <li><span class="talktitle">“Natural Language Processing.”</span><span class="talkdetail">A visiting lecture at Denenchofu High School, 2019/06</span></li>
            </ul>
          </div>
        </section>

        
        <section class="card section" id="committee">
          <h2>Committee</h2>
          <div class="body">
            <ul class="publist">
              <li><span class="committeerole"><a href="https://sites.google.com/sig-nl.ipsj.or.jp/sig-nl/home" target="_blank" rel="noopener">SIG‑NL</a></span> <span class="committeedetail">Committee (2025/04 –)</span></li>
              <li><span class="committeerole"><a href="https://www.anlp.jp/guide/editors.html" target="_blank" rel="noopener">ANLP</a></span> <span class="committeedetail">Editorial Committee (2025/04 –)</span></li>
              <li><span class="committeerole"><a href="https://www.ai-gakkai.or.jp/event/ai-seminar/planningboard/" target="_blank" rel="noopener">JSAI</a></span> <span class="committeedetail">Planning Committee (2024/05 –)</span></li>
              <li><span class="committeerole"><a href="https://inlg2024.github.io/" target="_blank" rel="noopener">INLG 2024</a></span> <span class="committeedetail">Sponsor Chair (2024)</span></li>
              <li><span class="committeerole"><a href="https://www.anlp.jp/nlp2024/" target="_blank" rel="noopener">NLP 2024</a></span> <span class="committeedetail">Executive Committee (2024)</span></li>
              <li><span class="committeerole"><a href="https://2023.aclweb.org/" target="_blank" rel="noopener">ACL 2023</a></span> <span class="committeedetail">Visa Assistance Team (2023)</span></li>
              <li><span class="committeerole"><a href="https://nlp-colloquium-jp.github.io/" target="_blank" rel="noopener">NLP Colloquium</a></span> <span class="committeedetail">Organizer (2021/06 – ) • <a href="https://twitter.com/nlp_colloquium" target="_blank" rel="noopener">X</a> • <a href="https://www.youtube.com/channel/UCHMmZqchxs-kiBEEyoIUkNw" target="_blank" rel="noopener">YouTube</a></span></li>
              <li><span class="committeerole"><a href="https://sites.google.com/view/nlp-phd" target="_blank" rel="noopener">NLP Study Group for Doctoral Students</a></span> <span class="committeedetail">Organizer (2020/12 - 2023/03)</span></li>
              <li><span class="committeerole"><a href="https://yans.anlp.jp/" target="_blank" rel="noopener">Young Researcher Association for NLP Studies (YANS) </a></span> <span class="committeedetail">Commitee (2020/03 - 2022/03)</span></li>
            </ul>
          </div>
        </section>

        
        <section class="card section" id="others">
          <h2>Others</h2>
          <div class="body">
            <h3>Scholarships & Grants</h3>
            <ul class="publist">
              <li><span class="schrole">JSPS Research Fellowship (DC2)</span><span class="schdetail"> 4.8M JPY/yr (2021–2023) [Acceptance Rate < 20%]</span> </li>
              <li><span class="schrole">JSPS Fellows Grant (21J13602)</span><span class="schdetail"> 1.5M JPY (2021–2023)</span></li>
              <li><span class="schrole">NeurIPS 2019 travel & registration support</span><span class="schdetail">JSAI</span></li>
              <li><span class="schrole">Tokyo Tech Tsubame Scholarship</span><span class="schdetail">480k JPY/yr (2020–2021)</span></li>
            </ul>
            <h3>Awards</h3>
            <ul class="publist">
              <li><span class="award-name">Young Researcher’s Encouragement Award</span>  <span class="award-detail">NLP 2024</span></li>
              <li><span class="award-name">Committee Special Award</span>  <span class="award-detail">NLP 2022</span></li>
              <li><span class="award-name">Nomination Award</span>  <span class="award-detail">2021 Microsoft Research Asia Fellowship</span></li>
            </ul>
            <h3>Teaching & Mentoring</h3>
            <ul class="publist">
              <li><span class="dotsep">Mentor, <a href="https://mbzuai.ac.ae/ugrip/">UGRIP program</a>, MBZUAI (2025)</span><span class="detail">two mentee projects; one Best Presentation Award🎉</span> </li>
              <li><span class="dotsep">TA, Machine Learning, Tokyo Tech</span> <span class="detail">2020 4Q, 2021 4Q</span></li>
            </ul>
          </div>
        </section>

        <footer class="muted">&copy; <span id="year"></span> Ayana Niwa. All rights reserved.</footer>
      </div>
    </div>
  </div>

  <script>
/* ---- アンカーのスムーススクロール（そのまま） ---- */
(function () {
  const MQ    = window.matchMedia('(max-width:980px)');
  const aside = document.querySelector('.aside');
  const grid  = document.querySelector('.grid');

  function isHashLink(el){
    const a = el.closest('a[href^="#"]:not([href="#"])');
    return a && document.querySelector(a.getAttribute('href')) ? a : null;
  }
  function profileBottomY(){
    if (!aside) return 0;
    const rect = aside.getBoundingClientRect();
    return rect.bottom + window.scrollY;
  }
  function targetTopY(target){
    const rect = target.getBoundingClientRect();
    return rect.top + window.scrollY;
  }
  function scrollToSection(target){
    if (!target) return;
    if (MQ.matches && aside) {
      const y = Math.max(targetTopY(target), profileBottomY() + 8);
      window.scrollTo({ top: y, behavior: 'smooth' });
    } else {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  }
  document.addEventListener('click', function(e){
    const a = isHashLink(e.target);
    if (!a) return;
    const target = document.querySelector(a.getAttribute('href'));
    if (!target) return;
    e.preventDefault();
    scrollToSection(target);
  });
  function onHashNavigate(){
    if (!location.hash) return;
    const target = document.querySelector(location.hash);
    if (target) scrollToSection(target);
  }
  window.addEventListener('load', onHashNavigate);
  window.addEventListener('hashchange', onHashNavigate);

  const sections = document.querySelectorAll('section[id]');
  function applyScrollMargin(){
    if (!sections.length) return;
    if (MQ.matches && aside && grid) {
      const gap = parseFloat(getComputedStyle(grid).gap) || 0;
      const extra = 8;
      const off = aside.offsetHeight + gap + extra;
      sections.forEach(sec => sec.style.scrollMarginTop = off + 'px');
    } else {
      sections.forEach(sec => sec.style.scrollMarginTop = '40px');
    }
  }
  applyScrollMargin();
  window.addEventListener('resize', applyScrollMargin);
  window.addEventListener('orientationchange', applyScrollMargin);
  if (aside && 'ResizeObserver' in window) {
    new ResizeObserver(applyScrollMargin).observe(aside);
  }
})();

/* ---- テーマ切替（ボタン無ければ何もしない） ---- */
(function(){
  var btn  = document.getElementById('theme-toggle');
  var root = document.documentElement;
  if (!btn) return;
  var saved = localStorage.getItem('theme');
  root.setAttribute('data-theme', saved || 'dark');
  btn.addEventListener('click', function(){
    var current = root.getAttribute('data-theme');
    var next = current === 'light' ? 'dark' : 'light';
    root.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
  });
})();

/* ---- Show more / Show less（オプショナルチェーン不使用） ---- */
(function () {
  var btn  = document.getElementById('toggle-domestic');
  var list = document.getElementById('domestic-list');
  if (!btn || !list) return;

  var extras = list.querySelectorAll('.extra');

  function setLabel(){
    var hiddenCount = 0;
    for (var i = 0; i < extras.length; i++) {
      if (extras[i].hasAttribute('hidden')) hiddenCount++;
    }
    btn.textContent = hiddenCount ? 'Show more (' + hiddenCount + ')' : 'Show less';
  }

  setLabel(); // 初期ラベル

  btn.addEventListener('click', function(){
    var collapsed = (extras.length === 0) || extras[0].hasAttribute('hidden');
    for (var i = 0; i < extras.length; i++) {
      if (collapsed) extras[i].removeAttribute('hidden');
      else extras[i].setAttribute('hidden', '');
    }
    setLabel();
  });
})();
document.getElementById('toggle-domestic')
 && document.getElementById('toggle-domestic').addEventListener('click', function(){ console.log('clicked'); });
 (function () {
  const trigger = document.getElementById('copy-email-icon');
  const bubble  = document.getElementById('copy-status');
  if (!trigger || !bubble) return;

  const email = trigger.dataset.email || 'example@example.com';

  function showBubble(text) {
    bubble.textContent = text || 'Copied!';
    bubble.style.display = 'inline';
    setTimeout(() => (bubble.style.display = 'none'), 1500);
  }

  async function copyEmail() {
    try {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        await navigator.clipboard.writeText(email);
      } else {
        // 旧ブラウザ向けフォールバック
        const ta = document.createElement('textarea');
        ta.value = email;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
      }
      showBubble('Copied!');
    } catch (e) {
      // 失敗したら手動コピー用のプロンプト
      window.prompt('Copy email manually:', email);
    }
  }

  // クリック & キーボード操作対応
  trigger.addEventListener('click', (e) => { e.preventDefault(); copyEmail(); });
  trigger.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); copyEmail(); }
  });
})();
</script>


</body>
</html>
